# Rate limiting configuration
# Active configuration for production environments
# For development, you may want to comment out or increase limits

# Define rate limit zones
# Zone for API endpoints (10 requests per second, burst of 20)
limit_req_zone $binary_remote_addr zone=api_limit:10m rate=10r/s;

# Zone for general routes (30 requests per second, burst of 50)
limit_req_zone $binary_remote_addr zone=general_limit:10m rate=30r/s;

# Zone for authentication endpoints (5 requests per second, burst of 10)
limit_req_zone $binary_remote_addr zone=auth_limit:10m rate=5r/s;

# Connection limiting (prevent connection flooding)
limit_conn_zone $binary_remote_addr zone=conn_limit:10m;

# Note: Rate limiting is applied in server blocks using:
# limit_req zone=api_limit burst=20 nodelay;
# limit_conn conn_limit 10;
#
# Example usage in server.conf or server-vercel.conf:
# location /api/auth {
#     limit_req zone=auth_limit burst=10 nodelay;
#     limit_conn conn_limit 5;
#     # ... rest of proxy configuration
# }
#
# location /api {
#     limit_req zone=api_limit burst=20 nodelay;
#     limit_conn conn_limit 10;
#     # ... rest of proxy configuration
# }
#
# location / {
#     limit_req zone=general_limit burst=50 nodelay;
#     limit_conn conn_limit 20;
#     # ... rest of proxy configuration
# }


